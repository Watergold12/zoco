<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZOCO | Zone of Comfort - Premium Innerwear</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@500;700&display=swap"
        rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>

<body class="bg-softpink font-sans text-midnight overflow-x-hidden">

    <!-- Announcement Bar -->
    <div class="announcement-bar">
        <div class="animate-slide">
            <span class="announcement-text">Free Express Shipping on All Prepaid
                Orders | Cash on Delivery Available</span>
            <span class="announcement-text">Free Express Shipping on All Prepaid
                Orders | Cash on Delivery Available</span>
            <span class="announcement-text">Free Express Shipping on All Prepaid
                Orders | Cash on Delivery Available</span>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="flex items-center">
            <a href="{% url 'search' %}" class="nav-icon-btn search-icon">
                <i class="fa-solid fa-magnifying-glass"></i>
            </a>
        </div>

        <a href="{% url 'home' %}" class="nav-logo-container group">
            <div class="nav-logo-wrapper">
                <img src="{% static 'assets/zoco-logo-updated.png' %}" alt="ZOCO Logo" class="nav-logo-img">
            </div>
        </a>

        <div class="flex items-center space-x-8">
            {% if user.is_authenticated %}
                    <a href="{% url 'update_user' %}" class="nav-icon-btn cart-icon-wrapper">
                        <i class="fa-solid fa-user"></i>
                    </a>
                    <a href="{% url 'logout' %}" class="nav-icon-btn cart-icon-wrapper">
                        <i class="fa-solid fa-right-to-bracket"></i>
                    </a>
            {% else %}
                    <a href="{% url 'login' %}" class="nav-icon-btn cart-icon-wrapper">
                        <i class="fa-solid fa-right-from-bracket"></i>
                    </a>
            {% endif %}
            <a class="nav-icon-btn cart-icon-wrapper" href="{% url 'cart_summary' %}">
                <i class="fa-solid fa-bag-shopping"></i>
                <span class="cart-count" id="cart_quantity">{{ cart|length }}</span>
            </a>
        </div>
    </nav>
    
    <!-- Navigation Links -->
    <div class="nav-links-bar">
        <a href="
        {% if request.resolver_match.url_name == 'home' %}
            #new-arrivals
        {% else %}
            {% url 'home' %}
        {% endif %}
        " class="nav-link">
            New Arrivals
            <span class="nav-link-underline"></span>
        </a>
        <a href="{% url 'collections' %}" class="nav-link">
            Collections
            <span class="nav-link-underline"></span>
        </a>
        <a href="{% url 'story' %}" class="nav-link">
            Our Story
            <span class="nav-link-underline"></span>
        </a>
    </div>

    <!-- Main Content -->
    {% block content %}    
    {% endblock %}

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-grid">
            <div class="footer-brand">
                <div class="brand-row">
                    <img src="{% static 'assets/zoco-logo-updated.png' %}" alt="ZOCO Logo" style="height: 2.5rem; width: auto;">
                    <span class="font-heading"
                        style="font-size: 1.875rem; font-weight: bold; color: var(--color-midnight);">ZOCO</span>
                </div>
                <p class="footer-links" style="color: var(--color-gray-400); line-height: 1.6;">Redefining luxury
                    through the lens of
                    comfort. Every piece is a promise of quality, style, and grace.</p>
            </div>
            <div>
                <h4 class="footer-heading">Support</h4>
                <ul class="footer-links">
                    <li><a href="#">Order Tracking</a></li>
                    <li><a href="#">Returns & Exchanges</a></li>
                    <li><a href="{% url 'size_guide' %}">Sizing Guide</a></li>
                    <li><a href="#">Shipping Policy</a></li>
                </ul>
            </div>
            <div>
                <h4 class="footer-heading">Social</h4>
                <div class="social-links">
                    <a href="#"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#"><i class="fa-brands fa-pinterest"></i></a>
                    <a href="#"><i class="fa-brands fa-facebook"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <span>Â© 2026, ZOCO | Zone of Comfort. All Rights Reserved.</span>
            <div class="social-links" style="font-size: 1.25rem;">
                <i class="fa-brands fa-cc-visa"></i>
                <i class="fa-brands fa-cc-mastercard"></i>
                <i class="fa-brands fa-cc-apple-pay"></i>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Bubble -->
    <a href="#" class="whatsapp-bubble">
        <i class="fa-brands fa-whatsapp"></i>
    </a>

    <!-- Search Overlay -->
    <div id="searchOverlay" class="search-overlay">
        <button class="search-close-btn">
            <i class="fa-solid fa-xmark"></i>
        </button>
        <div class="search-container">
            <h2 class="font-heading"
                style="font-size: 1.875rem; font-weight: bold; text-align: center; margin-bottom: 2rem; color: var(--color-midnight);">
                Find Your Comfort</h2>
            <div class="search-input-wrapper">
                <i class="fa-solid fa-magnifying-glass search-input-icon"></i>
                <input type="text" id="searchInput" placeholder="Search collections, essentials, new arrivals..."
                    class="search-input">
            </div>
            <div id="searchResults" class="custom-scrollbar"
                style="margin-top: 2.5rem; max-height: 60vh; overflow-y: auto;">
                <!-- Results injected here -->
            </div>
        </div>
    </div>

    <!-- Success Toast (Shared) -->
    <div id="successToast" class="toast">
        <i class="fa-solid fa-check text-rosegold"></i>
        <span style="font-size: 10px; letter-spacing: 0.2em; text-transform: uppercase; font-weight: bold;">Added to
            Wardrobe</span>
    </div>

    {% if messages %}
        <div id="loginToast" class="toast" bis_skin_checked="1">
            {% for message in messages %}
                <i class="fa-solid fa-check text-rosegold"></i>
                <span style="font-size: 10px; letter-spacing: 0.2em; text-transform: uppercase; font-weight: bold;">{{ message }}</span>
            {% endfor %}
        </div>
    {% endif %}

    <!-- Scripts -->
    <script>
        const products = [
            {% for product in products %}
            {
                id: {{ product.id }},
                name: "{{ product.name|escapejs }}",
                price: {{ product.price }},
                img: "{{ product.image.url }}",
                category: "{{ product.category|escapejs }}",
                isNew: {% if product.is_new %}true{% else %}false{% endif %}
            }{% if not forloop.last %},{% endif %}
            {% endfor %}
        ];
    </script>
    <script src="{% static 'js/script.js' %}"></script>
    <script>
        // Scroll Reveal
        const observerOptions = { threshold: 0.15 };
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('visible');
            });
        }, observerOptions);
        document.querySelectorAll('.scroll-reveal').forEach(el => observer.observe(el));
    </script>
</body>

</html>