<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collections | ZOCO - Premium Innerwear</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@500;700&display=swap"
        rel="stylesheet">
</head>

<body class="bg-softpink font-sans text-midnight overflow-x-hidden">

    <!-- Announcement Bar -->
    <div class="announcement-bar">
        <div class="animate-slide">
            <span class="announcement-text">Free Express Shipping on All Prepaid
                Orders | Cash on Delivery Available</span>
            <span class="announcement-text">Free Express Shipping on All Prepaid
                Orders | Cash on Delivery Available</span>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="flex items-center">
            <button onclick="toggleSearch()" class="nav-icon-btn search-icon">
                <i class="fa-solid fa-magnifying-glass"></i>
            </button>
        </div>

        <a href="{% url 'home' %}" class="nav-logo-container group">
            <div class="nav-logo-wrapper">
                <img src="{% static 'assets/zoco-logo-updated.png' %}" alt="ZOCO Logo" class="nav-logo-img">
            </div>
        </a>

        <div class="flex items-center space-x-8">
            <button onclick="toggleCart()" class="nav-icon-btn cart-icon-wrapper">
                <i class="fa-solid fa-bag-shopping"></i>
                <span id="cartBadgeCount" class="cart-count">0</span>
            </button>
        </div>
    </nav>

    <!-- Navigation Links -->
    <div class="nav-links-bar">
        <a href="{% url 'home' %}" class="nav-link">
            New Arrivals
            <span class="nav-link-underline"></span>
        </a>
        <a href="{% url 'collections' %}" class="nav-link">
            Collections
            <span class="nav-link-underline"></span>
        </a>
        <a href="{% url 'story' %}" class="nav-link">
            Our Story
            <span class="nav-link-underline"></span>
        </a>
    </div>

    <!-- Header Section -->
    <header style="padding: 5rem 0; background-color: white; border-bottom: 1px solid var(--color-rose-50);">
        <div class="section-container" style="padding: 0 2rem; text-align: center;">
            <span class="product-category scroll-reveal block" style="margin-bottom: 1rem;">Seasonal Edit 2026</span>
            <h1 class="section-title font-heading scroll-reveal" style="font-size: 3.75rem;">The Dress Collection</h1>
            <p class="section-subtitle scroll-reveal" style="margin: 0 auto; max-width: 36rem;">"Effortless elegance
                for every moment. Simply hover over an image to add it to your selection."</p>
        </div>
    </header>

    <!-- Products Grid -->
    <main class="section-container" style="padding: 5rem 2rem;">
        <div id="productGrid" class="collections-grid">
            <!-- Products will be injected here -->
            {% for product in products %}
                <div class="product-card scroll-reveal">
                    <div class="product-image-container aspect-4-5 bg-rose-50 shadow-sm relative group">
                        <img src="{% static 'assets/product.image.url' %}" class="product-img" alt="product.name">
                        {% if product.is_new %}
                            <div class="new-badge">
                                <span class="new-badge-text">New In</span>
                            </div>
                        {% endif %}
                        <div class="product-overlay">
                            <button class="add-cart-btn" onclick="addToCart({{ product.id }})">Add to Wardrobe</button>
                        </div>
                        <div class="added-flash" id="flash-{{ product.id }}">
                            <i class="fa-solid fa-check text-white text-4xl"></i>
                        </div>
                    </div>
                    <div class="product-info">
                        <span class="product-category">{{ product.category }}</span>
                        <h3 class="product-title-large">{{ product.name }}</h3>
                        <p class="product-price">₹{{ product.price }}</p>
                    </div>
                </div>
            {% endfor %}
        </div>
    </main>

    <!-- Cart Overlay & Drawer -->
    <div id="cartOverlay" onclick="toggleCart()" class="overlay-bg"></div>
    <div id="cartDrawer" class="drawer closed custom-scrollbar">

        <div
            style="padding: 3rem 2.5rem; border-bottom: 1px solid var(--color-rose-50); display: flex; align-items: center; justify-content: space-between;">
            <div>
                <h2 class="font-heading" style="font-size: 2.25rem; font-weight: bold; color: var(--color-midnight);">
                    Your Wardrobe</h2>
                <p
                    style="font-size: 10px; letter-spacing: 0.3em; text-transform: uppercase; color: var(--color-rosegold); font-weight: bold; margin-top: 0.5rem;">
                    Personal Selection</p>
            </div>
            <button onclick="toggleCart()"
                style="width: 3rem; height: 3rem; border-radius: 9999px; border: 1px solid var(--color-rose-100); display: flex; align-items: center; justify-content: center; font-size: 1.25rem; cursor: pointer; background: transparent; transition: all 0.5s;">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>

        <div id="cartItemsContainer" style="flex-grow: 1; overflow-y: auto; padding: 2rem 2.5rem;"
            class="custom-scrollbar">
            <div id="emptyCart"
                style="height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; gap: 2rem;">
                <div
                    style="width: 6rem; height: 6rem; background-color: rgba(255, 241, 242, 0.5); border-radius: 9999px; display: flex; align-items: center; justify-content: center;">
                    <i class="fa-solid fa-bag-shopping"
                        style="font-size: 1.875rem; color: rgba(183, 110, 121, 0.3);"></i>
                </div>
                <p style="color: var(--color-gray-400); font-style: italic; font-size: 0.875rem;">"Your personal
                    collection is empty."</p>
            </div>
            <div id="cartList" class="hidden" style="display: flex; flex-direction: column; gap: 2rem;"></div>
        </div>

        <div id="cartFooter" class="hidden"
            style="padding: 2.5rem; background-color: rgba(255, 249, 248, 0.5); border-top: 1px solid var(--color-rose-100);">
            <div style="margin-bottom: 2rem; display: flex; flex-direction: column; gap: 1rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.875rem;">
                    <span
                        style="color: var(--color-gray-500); font-weight: bold; letter-spacing: 0.1em; text-transform: uppercase; font-size: 10px;">Estimated
                        Total</span>
                    <span id="cartTotalDisplay" class="font-heading"
                        style="font-size: 1.5rem; font-weight: bold; color: var(--color-midnight);">₹0.00</span>
                </div>
            </div>
            <button class="btn-primary">
                Complete Selection
            </button>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="successToast" class="toast">
        <i class="fa-solid fa-check text-rosegold"></i>
        <span style="font-size: 10px; letter-spacing: 0.2em; text-transform: uppercase; font-weight: bold;">Added to
            Wardrobe</span>
    </div>

    <!-- Search Overlay -->
    <div id="searchOverlay" class="search-overlay">
        <button onclick="toggleSearch()" class="search-close-btn">
            <i class="fa-solid fa-xmark"></i>
        </button>
        <div class="search-container">
            <h2 class="font-heading"
                style="font-size: 1.875rem; font-weight: bold; text-align: center; margin-bottom: 2rem; color: var(--color-midnight);">
                Find Your Comfort</h2>
            <div class="search-input-wrapper">
                <i class="fa-solid fa-magnifying-glass search-input-icon"></i>
                <input type="text" id="searchInput" placeholder="Search collections, essentials, new arrivals..."
                    class="search-input">
            </div>
            <div id="searchResults" class="custom-scrollbar"
                style="margin-top: 2.5rem; max-height: 60vh; overflow-y: auto;">
                <!-- Results injected here -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="{% static 'js/products.js' %}"></script>
    <script src="{% static 'js/script.js' %}"></script>
    <script>
        {% comment %} function renderProducts() {
            const grid = document.getElementById('productGrid');
            if (!grid) return;

            grid.innerHTML = products.map(p => `
                <div class="product-card scroll-reveal">
                    <div class="product-image-container aspect-4-5 bg-rose-50 shadow-sm relative group">
                        <img src="${p.img}" class="product-img" alt="${p.name}">
                        ${p.isNew ? '<div class="new-badge"><span class="new-badge-text">New In</span></div>' : ''}
                        <div class="product-overlay">
                            <button class="add-cart-btn" onclick="addToCart(${p.id})">Add to Wardrobe</button>
                        </div>
                        <div class="added-flash" id="flash-${p.id}">
                            <i class="fa-solid fa-check text-white text-4xl"></i>
                        </div>
                    </div>
                    <div class="product-info">
                        <span class="product-category">${p.category}</span>
                        <h3 class="product-title-large">${p.name}</h3>
                        <p class="product-price">₹${p.price.toLocaleString()}</p>
                    </div>
                </div>
            `).join('');

            setTimeout(() => {
                document.querySelectorAll('.scroll-reveal').forEach(el => el.classList.add('visible'));
            }, 100);
        }

        window.onload = renderProducts; {% endcomment %}
    </script>
</body>

</html>